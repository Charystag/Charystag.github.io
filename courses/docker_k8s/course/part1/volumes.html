<!DOCTYPE HTML>
<html lang="fr" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Volumes et persistence des données - Docker-K8s</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../course/part1/intro.html"><strong aria-hidden="true">1.</strong> Introduction à Docker</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../course/part1/contenerisation.html"><strong aria-hidden="true">1.1.</strong> Histoire de la conteneurisation</a></li><li class="chapter-item expanded "><a href="../../course/part1/docker_basics.html"><strong aria-hidden="true">1.2.</strong> Bases de Docker</a></li><li class="chapter-item expanded "><a href="../../course/part1/images_and_containers.html"><strong aria-hidden="true">1.3.</strong> Images et containers</a></li><li class="chapter-item expanded "><a href="../../course/part1/volumes.html" class="active"><strong aria-hidden="true">1.4.</strong> Volumes et persistence des données</a></li><li class="chapter-item expanded "><a href="../../course/part1/wrap_up.html"><strong aria-hidden="true">1.5.</strong> Résumé</a></li></ol></li><li class="chapter-item expanded "><a href="../../course/part2/intro.html"><strong aria-hidden="true">2.</strong> Concepts Avancés de Docker</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../course/part2/networking.html"><strong aria-hidden="true">2.1.</strong> Mise en Réseau avec Docker</a></li><li class="chapter-item expanded "><a href="../../course/part2/compose.html"><strong aria-hidden="true">2.2.</strong> Docker Compose</a></li></ol></li><li class="chapter-item expanded "><a href="../../exercises/index.html"><strong aria-hidden="true">3.</strong> Exercices</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../exercises/ms_builds.html"><strong aria-hidden="true">3.1.</strong> Multistage Builds</a></li><li class="chapter-item expanded "><a href="../../exercises/nginx_server_setup.html"><strong aria-hidden="true">3.2.</strong> Nginx Server Setup</a></li><li class="chapter-item expanded "><a href="../../exercises/nginx_reverse_proxy.html"><strong aria-hidden="true">3.3.</strong> Nginx Reverse Proxy</a></li></ol></li><li class="chapter-item expanded "><a href="../../exercises/hello-minikube.html"><strong aria-hidden="true">4.</strong> Kubernetes Tutorials</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../exercises/first-deployment.html"><strong aria-hidden="true">4.1.</strong> First Deployment</a></li><li class="chapter-item expanded "><a href="../../exercises/kubernetes_volumes.html"><strong aria-hidden="true">4.2.</strong> Kubernetes Volumes</a></li></ol></li><li class="chapter-item expanded "><a href="../../exercises/first-deployment-non-guided.html"><strong aria-hidden="true">5.</strong> Kubernetes Exercises</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../exercises/kubernetes-volumes-non-guided.html"><strong aria-hidden="true">5.1.</strong> Kubernetes Volumes Exercise</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Docker-K8s</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="i4-gestion-des-données-avec-les-volumes-et-les-bind-mount"><a class="header" href="#i4-gestion-des-données-avec-les-volumes-et-les-bind-mount"><strong>I.4 Gestion des données avec les Volumes et les Bind Mount</strong></a></h1>
<hr />
<p>Les conteneurs Docker sont par nature éphémères. Une fois arrêtés ou supprimés, les données générées dans le conteneur disparaissent. Pour garantir une persistance des données ou partager des fichiers entre l’hôte et les conteneurs, Docker offre deux solutions principales : <strong>les volumes</strong> et <strong>les bind mounts</strong>. Cette section explore ces concepts et leurs cas d’usage.</p>
<hr />
<h2 id="i4a-stockage-persistant-dans-les-conteneurs"><a class="header" href="#i4a-stockage-persistant-dans-les-conteneurs"><strong>I.4.a Stockage persistant dans les conteneurs</strong></a></h2>
<h3 id="volumes--stockage-géré-par-docker"><a class="header" href="#volumes--stockage-géré-par-docker"><strong>Volumes : Stockage géré par Docker</strong></a></h3>
<p>Les volumes sont des unités de stockage gérées directement par Docker. Ils sont indépendants du cycle de vie des conteneurs et sont stockés dans un répertoire contrôlé par Docker, généralement dans <code>/var/lib/docker/volumes/</code>.</p>
<p><strong>Caractéristiques des volumes :</strong></p>
<ul>
<li>Créés et gérés via le CLI Docker.</li>
<li>Conçus pour être sécurisés, performants et portables entre hôtes Docker.</li>
<li>Ils ne nécessitent pas de chemin spécifique sur l’hôte.</li>
</ul>
<p><strong>Créer un volume :</strong></p>
<pre><code class="language-bash">docker volume create my_volume
</code></pre>
<p><strong>Monter un volume dans un conteneur :</strong></p>
<pre><code class="language-bash">docker run -v my_volume:/data nginx
</code></pre>
<p>Dans cet exemple, le répertoire <code>/data</code> dans le conteneur sera associé au volume <code>my_volume</code>.</p>
<p>Pour en savoir plus : <a href="https://docs.docker.com/storage/volumes/">documentation sur les volumes</a>.</p>
<hr />
<h3 id="bind-mounts--mappage-direct-entre-hôte-et-conteneur"><a class="header" href="#bind-mounts--mappage-direct-entre-hôte-et-conteneur"><strong>Bind Mounts : Mappage direct entre hôte et conteneur</strong></a></h3>
<p>Les bind mounts permettent de monter un répertoire ou un fichier spécifique de l’hôte directement dans le conteneur. Contrairement aux volumes, ils ne sont pas gérés par Docker et utilisent des chemins absolus sur l’hôte.</p>
<p><strong>Caractéristiques des bind mounts :</strong></p>
<ul>
<li>Contrôlés directement par l’utilisateur via des chemins spécifiques.</li>
<li>Utilisés pour des tâches de développement local nécessitant des mises à jour en temps réel.</li>
<li>Plus risqués en termes de sécurité et de portabilité.</li>
</ul>
<p><strong>Créer un bind mount :</strong></p>
<pre><code class="language-bash">docker run -v /path/host:/data nginx
</code></pre>
<p>Dans cet exemple, le répertoire <code>/path/host</code> sur l’hôte est monté dans le conteneur au chemin <code>/data</code>.</p>
<p>Pour plus de détails : <a href="https://docs.docker.com/storage/bind-mounts/">documentation sur les bind mounts</a>.</p>
<hr />
<h2 id="i4b-différences-entre-volumes-et-bind-mounts"><a class="header" href="#i4b-différences-entre-volumes-et-bind-mounts"><strong>I.4.b Différences entre volumes et bind mounts</strong></a></h2>
<div class="table-wrapper"><table><thead><tr><th><strong>Aspect</strong></th><th><strong>Volumes</strong></th><th><strong>Bind Mounts</strong></th></tr></thead><tbody>
<tr><td><strong>Gestion</strong></td><td>Géré par Docker.</td><td>Géré par l’utilisateur.</td></tr>
<tr><td><strong>Sécurité</strong></td><td>Plus sécurisé : chemins abstraits.</td><td>Moins sécurisé : accès direct à l’hôte.</td></tr>
<tr><td><strong>Portabilité</strong></td><td>Portables entre environnements Docker.</td><td>Dépend des chemins absolus sur l’hôte.</td></tr>
<tr><td><strong>Performances</strong></td><td>Optimisées pour Docker.</td><td>Dépendent de l’hôte.</td></tr>
<tr><td><strong>Cas d’usage</strong></td><td>Bases de données, stockage persistant.</td><td>Développement local, partage de fichiers.</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="i4c-cas-dusage"><a class="header" href="#i4c-cas-dusage"><strong>I.4.c Cas d’usage</strong></a></h2>
<h3 id="stockage-des-données-de-bases-de-données"><a class="header" href="#stockage-des-données-de-bases-de-données"><strong>Stockage des données de bases de données</strong></a></h3>
<p>Lors de l'exécution de bases de données comme MySQL ou PostgreSQL dans des conteneurs, il est crucial de garantir la persistance des données. Les volumes sont idéaux dans ce cas :</p>
<pre><code class="language-bash">docker run -v db_volume:/var/lib/mysql mysql
</code></pre>
<p>Dans cet exemple, toutes les données de la base MySQL seront stockées dans le volume <code>db_volume</code>, qui persiste même si le conteneur est supprimé.</p>
<hr />
<h3 id="développement-local-avec-mises-à-jour-en-direct"><a class="header" href="#développement-local-avec-mises-à-jour-en-direct"><strong>Développement local avec mises à jour en direct</strong></a></h3>
<p>Pour des applications en cours de développement, les bind mounts permettent de synchroniser les fichiers de l’hôte avec ceux du conteneur. Par exemple, pour une application Node.js :</p>
<pre><code class="language-bash">docker run -v /path/to/code:/usr/src/app node
</code></pre>
<p>Toute modification dans <code>/path/to/code</code> sur l’hôte sera immédiatement visible dans le conteneur, facilitant le développement.</p>
<h2 id="exercices"><a class="header" href="#exercices"><strong>Exercices</strong></a></h2>
<details>
  <summary>Créer un volume</summary>
<h3 id="objectif"><a class="header" href="#objectif">Objectif</a></h3>
<p>Apprendre à créer un volume Docker, l'attacher à un conteneur, écrire des données dans le volume et vérifier leur persistance.</p>
<hr />
<h3 id="Étapes"><a class="header" href="#Étapes">Étapes</a></h3>
<ol>
<li>
<p><strong>Créer un volume</strong></p>
<ul>
<li>Créez un volume Docker nommé <code>my-volume</code> :
<pre><code class="language-bash">docker volume create my-volume
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Lancer un conteneur avec le volume</strong></p>
<ul>
<li>Lancez un conteneur <code>nginx</code> en attachant le volume :
<pre><code class="language-bash">docker run -d --name nginx-container -v my-volume:/usr/share/nginx/html nginx
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Écrire des données dans le volume</strong></p>
<ul>
<li>Copiez un fichier dans le volume :
<pre><code class="language-bash">docker exec nginx-container sh -c "echo 'Hello, Docker Volume!' &gt; /usr/share/nginx/html/index.html"
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Vérifier la persistance</strong></p>
<ul>
<li>Arrêtez et supprimez le conteneur :
<pre><code class="language-bash">docker stop nginx-container
docker rm nginx-container
</code></pre>
</li>
<li>Relancez un nouveau conteneur en attachant le même volume :
<pre><code class="language-bash">docker run -d --name new-nginx-container -v my-volume:/usr/share/nginx/html nginx
</code></pre>
</li>
<li>Vérifiez que les données sont toujours présentes :
<pre><code class="language-bash">docker exec new-nginx-container cat /usr/share/nginx/html/index.html
</code></pre>
</li>
</ul>
</li>
</ol>
<hr />
<h3 id="résultat-attendu"><a class="header" href="#résultat-attendu">Résultat attendu</a></h3>
<p>Les données ajoutées au volume sont persistantes, même après la suppression et le redémarrage du conteneur.</p>
</details>
<details>
  <summary>Utiliser des Bind Mounts</summary>
<h3 id="objectif-1"><a class="header" href="#objectif-1">Objectif</a></h3>
<p>Attacher un répertoire local à un conteneur en utilisant un bind mount et tester les mises à jour en temps réel.</p>
<hr />
<h3 id="Étapes-1"><a class="header" href="#Étapes-1">Étapes</a></h3>
<ol>
<li>
<p><strong>Créer un répertoire local</strong></p>
<ul>
<li>Créez un répertoire local et ajoutez un fichier :
<pre><code class="language-bash">mkdir ~/bind-mount-test
echo 'Hello, Bind Mount!' &gt; ~/bind-mount-test/index.html
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Lancer un conteneur avec un bind mount</strong></p>
<ul>
<li>Attachez le répertoire local au conteneur <code>nginx</code> :
<pre><code class="language-bash">docker run -d --name nginx-bind -v ~/bind-mount-test:/usr/share/nginx/html -p 8080:80 nginx
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Tester la mise à jour en temps réel</strong></p>
<ul>
<li>Mettez à jour le fichier local :
<pre><code class="language-bash">echo 'Updated Bind Mount!' &gt; ~/bind-mount-test/index.html
</code></pre>
</li>
<li>Accédez au conteneur pour vérifier la mise à jour :
<pre><code class="language-bash">curl http://localhost:8080
</code></pre>
</li>
</ul>
</li>
</ol>
<hr />
<h3 id="résultat-attendu-1"><a class="header" href="#résultat-attendu-1">Résultat attendu</a></h3>
<p>Les modifications des fichiers locaux sont immédiatement visibles dans le conteneur.</p>
</details>
<details>
  <summary>Inspecter les volumes</summary>
<h3 id="objectif-2"><a class="header" href="#objectif-2">Objectif</a></h3>
<p>Lister les volumes Docker et examiner leurs métadonnées.</p>
<hr />
<h3 id="Étapes-2"><a class="header" href="#Étapes-2">Étapes</a></h3>
<ol>
<li>
<p><strong>Lister les volumes</strong></p>
<ul>
<li>Affichez tous les volumes disponibles :
<pre><code class="language-bash">docker volume ls
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Inspecter un volume</strong></p>
<ul>
<li>Inspectez les détails du volume <code>my-volume</code> :
<pre><code class="language-bash">docker volume inspect my-volume
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Vérifier l'emplacement physique</strong></p>
<ul>
<li>Notez le chemin sur le système hôte où les données du volume sont stockées.</li>
</ul>
</li>
</ol>
<hr />
<h3 id="résultat-attendu-2"><a class="header" href="#résultat-attendu-2">Résultat attendu</a></h3>
<p>Vous avez visualisé les métadonnées du volume, y compris son emplacement physique sur le système hôte.</p>
</details>
<details>
  <summary>Simuler un stockage persistant</summary>
<h3 id="objectif-3"><a class="header" href="#objectif-3">Objectif</a></h3>
<p>Configurer un conteneur MySQL avec un volume, ajouter des données, redémarrer le conteneur et vérifier la persistance des données.</p>
<hr />
<h3 id="Étapes-3"><a class="header" href="#Étapes-3">Étapes</a></h3>
<ol>
<li>
<p><strong>Créer un volume pour MySQL</strong></p>
<ul>
<li>Créez un volume nommé <code>mysql-data</code> :
<pre><code class="language-bash">docker volume create mysql-data
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Lancer un conteneur MySQL</strong></p>
<ul>
<li>Lancez un conteneur MySQL avec le volume attaché :
<pre><code class="language-bash">docker run -d --name mysql-container -v mysql-data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root mysql
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Ajouter des données à la base</strong></p>
<ul>
<li>Connectez-vous à MySQL et créez une base de données :
<pre><code class="language-bash">docker exec -it mysql-container mysql -uroot -proot -e "CREATE DATABASE test_db;"
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Redémarrer le conteneur</strong></p>
<ul>
<li>Arrêtez et supprimez le conteneur :
<pre><code class="language-bash">docker stop mysql-container
docker rm mysql-container
</code></pre>
</li>
<li>Relancez un nouveau conteneur MySQL avec le même volume :
<pre><code class="language-bash">docker run -d --name mysql-container -v mysql-data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root mysql
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Vérifier la persistance des données</strong></p>
<ul>
<li>Connectez-vous à MySQL et vérifiez que la base de données <code>test_db</code> existe toujours :
<pre><code class="language-bash">docker exec -it mysql-container mysql -uroot -proot -e "SHOW DATABASES;"
</code></pre>
</li>
</ul>
</li>
</ol>
<hr />
<h3 id="résultat-attendu-3"><a class="header" href="#résultat-attendu-3">Résultat attendu</a></h3>
<p>Les données dans le volume MySQL sont conservées même après la suppression et le redémarrage du conteneur.</p>
</details>
<details>
  <summary>Résoudre les problèmes de montage</summary>
<h3 id="objectif-4"><a class="header" href="#objectif-4">Objectif</a></h3>
<p>Provoquer une erreur de montage en configurant mal un bind mount, identifier le problème et le résoudre.</p>
<hr />
<h3 id="Étapes-4"><a class="header" href="#Étapes-4">Étapes</a></h3>
<ol>
<li>
<p><strong>Provoquer une erreur</strong></p>
<ul>
<li>Lancez un conteneur avec un chemin local inexistant :
<pre><code class="language-bash">docker run -d --name nginx-error -v ./nonexistent:/usr/share/nginx/html nginx
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Observer l'erreur</strong></p>
<ul>
<li>Vérifiez l'état du conteneur :
<pre><code class="language-bash">docker ps -a
</code></pre>
</li>
<li>Observez le message d'erreur avec :
<pre><code class="language-bash">docker logs nginx-error
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Corriger l'erreur</strong></p>
<ul>
<li>Créez le chemin local manquant :
<pre><code class="language-bash">mkdir -p ./nonexistent
</code></pre>
</li>
<li>Relancez le conteneur correctement :
<pre><code class="language-bash">docker run -d --name nginx-fixed -v ./nonexistent:/usr/share/nginx/html nginx
</code></pre>
</li>
</ul>
</li>
</ol>
<hr />
<h3 id="résultat-attendu-4"><a class="header" href="#résultat-attendu-4">Résultat attendu</a></h3>
<p>Vous avez provoqué une erreur de montage, identifié le problème, et corrigé la configuration pour relancer le conteneur avec succès.</p>
</details>
<h2 id="quiz"><a class="header" href="#quiz"><strong>Quiz</strong></a></h2>
<div class="quiz-placeholder" data-quiz-name="&quot;volumes&quot;" data-quiz-questions="{&quot;questions&quot;:[{&quot;context&quot;:&quot;Les volumes Docker sont utilisés pour stocker des données qui doivent persister même après la suppression ou le redémarrage d'un conteneur.\n&quot;,&quot;id&quot;:&quot;e2dcaccf-3243-46fc-a87e-e6232f79fdf4&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;Fournir un mécanisme de stockage persistant pour les conteneurs.&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;Exécuter plusieurs conteneurs en parallèle.&quot;,&quot;Créer des images à partir de données persistantes.&quot;,&quot;Améliorer les performances réseau.&quot;],&quot;prompt&quot;:&quot;Quel est le but principal des volumes Docker ?&quot;}},{&quot;context&quot;:&quot;Cette commande crée un volume que vous pouvez utiliser avec un conteneur.&quot;,&quot;id&quot;:&quot;cfb88232-9149-49ec-83bc-c20a21a0f355&quot;,&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;docker volume create&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;Quelle commande Docker est utilisée pour créer un nouveau volume ?&quot;}},{&quot;context&quot;:&quot;La commande `docker volume create` crée un volume que les conteneurs peuvent utiliser pour stocker des données persistantes.\n&quot;,&quot;id&quot;:&quot;9264f6cd-5f01-4371-830a-903b70d37cce&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;docker volume create&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;docker volume add&quot;,&quot;docker volume init&quot;,&quot;docker volume new&quot;],&quot;prompt&quot;:&quot;Quelle commande est utilisée pour créer un nouveau volume ?&quot;}},{&quot;context&quot;:&quot;Le flag `-v` ou `--volume` permet de monter un volume dans un conteneur.&quot;,&quot;id&quot;:&quot;c077556c-3c62-41d0-bcac-5473100322f5&quot;,&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;-v&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;Quel flag est utilisé dans la commande `docker run` pour spécifier un volume ?&quot;}},{&quot;context&quot;:&quot;Les volumes Docker ne sont pas supprimés automatiquement, même si le conteneur qui les utilise est supprimé avec `--rm`.\n&quot;,&quot;id&quot;:&quot;253794bb-c24b-4658-9d3e-4d0f1ba2f997&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;Le volume reste intact et disponible pour d'autres conteneurs.&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;Le volume est supprimé.&quot;,&quot;Le volume est sauvegardé sous un autre nom.&quot;,&quot;Le volume est converti en bind mount.&quot;],&quot;prompt&quot;:&quot;Que se passe-t-il lorsqu’un conteneur utilisant un volume est supprimé avec le flag `--rm` ?&quot;}},{&quot;context&quot;:&quot;Cette commande affiche tous les volumes, qu'ils soient utilisés ou non.&quot;,&quot;id&quot;:&quot;57b3ea20-8dff-4e58-ba0c-6cc9a290e2b7&quot;,&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;docker volume ls&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;Quelle commande Docker liste tous les volumes sur l'hôte ?&quot;}},{&quot;context&quot;:&quot;Le flag `-v` ou son équivalent plus explicite `--volume` est utilisé pour attacher des volumes à un conteneur.\n&quot;,&quot;id&quot;:&quot;c167ef50-b3eb-4c02-b4c9-f3eea8ad32a8&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;-v&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;--volume&quot;,&quot;--mount&quot;,&quot;-m&quot;],&quot;prompt&quot;:&quot;Quel flag est utilisé pour spécifier un volume dans la commande `docker run` ?&quot;}},{&quot;context&quot;:&quot;Cette commande fournit des informations détaillées sur un volume spécifique.&quot;,&quot;id&quot;:&quot;9e795487-f57f-406d-b075-267e45b3dbd6&quot;,&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;docker volume inspect&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;Quelle commande Docker inspecte les métadonnées d’un volume spécifique ?&quot;}},{&quot;context&quot;:&quot;Les volumes anonymes sont créés sans nom explicite, ce qui les rend difficiles à gérer et à réutiliser.\n&quot;,&quot;id&quot;:&quot;f69bee2a-644c-48c6-a8cd-ba9119b54725&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;Les volumes anonymes n'ont pas de nom et ne peuvent pas être facilement réutilisés.&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;Les volumes anonymes sont limités en taille.&quot;,&quot;Les volumes nommés ne peuvent pas être partagés entre conteneurs.&quot;,&quot;Les volumes anonymes sont automatiquement supprimés après l'arrêt d'un conteneur.&quot;],&quot;prompt&quot;:&quot;Quelle est la différence entre les volumes anonymes et nommés ?&quot;}},{&quot;context&quot;:&quot;Cette commande supprime tous les volumes inutilisés pour libérer de l’espace disque.&quot;,&quot;id&quot;:&quot;efec88c6-7710-4dba-ba10-3607275952e7&quot;,&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;docker volume prune&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;Quelle commande permet de supprimer les volumes inutilisés dans Docker ?&quot;}},{&quot;context&quot;:&quot;Les bind mounts mappent directement des répertoires du système hôte, ce qui peut poser des problèmes de sécurité en cas de mauvaise configuration.\n&quot;,&quot;id&quot;:&quot;b4a0e1d7-a743-46dc-aee8-bc0bcec41729&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;Ils peuvent compromettre la sécurité en exposant des fichiers du système hôte.&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;Ils ne peuvent pas être utilisés avec des conteneurs en réseau.&quot;,&quot;Ils nécessitent un démon Docker dédié.&quot;,&quot;Ils peuvent compromettre la sécurité en exposant des fichiers du système hôte.&quot;],&quot;prompt&quot;:&quot;Quel est un inconvénient d'utiliser les bind mounts en production ?&quot;}},{&quot;context&quot;:&quot;Les bind mounts permettent d’utiliser un répertoire du système hôte comme volume.&quot;,&quot;id&quot;:&quot;bc357b9f-2767-4fea-98e0-2c24d5eac973&quot;,&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;bind&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;Quel type de montage mappe directement un répertoire hôte à un conteneur ?&quot;}},{&quot;context&quot;:&quot;Docker crée automatiquement le répertoire manquant sur l’hôte pour éviter les erreurs lors de l’exécution du conteneur.\n&quot;,&quot;id&quot;:&quot;3a52da89-18bd-496b-924e-7e4ce6c91b76&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;Un nouveau répertoire est automatiquement créé sur l’hôte.&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;Le conteneur échoue à démarrer.&quot;,&quot;Le répertoire est ignoré par le conteneur.&quot;,&quot;Un message d’erreur est affiché et le conteneur continue de fonctionner.&quot;],&quot;prompt&quot;:&quot;Que se passe-t-il si vous essayez de binder un répertoire inexistant de l’hôte à un conteneur ?&quot;}},{&quot;context&quot;:&quot;Les volumes sont conçus pour stocker des données durables et partagées entre les conteneurs.&quot;,&quot;id&quot;:&quot;67b497c8-3261-4683-a442-c972b454f7b6&quot;,&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;volumes&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;Quel est le principal mécanisme de gestion du stockage dans Docker pour les données persistantes ?&quot;}},{&quot;context&quot;:&quot;Pour restreindre l’accès, ne partagez pas le volume avec d’autres conteneurs et utilisez des volumes nommés associés explicitement.\n&quot;,&quot;id&quot;:&quot;639271ba-bab1-461e-be33-7c913e954cc8&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;En attachant explicitement le volume uniquement au conteneur concerné.&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;En utilisant des volumes anonymes.&quot;,&quot;En configurant des permissions de conteneur.&quot;,&quot;En utilisant des bind mounts.&quot;],&quot;prompt&quot;:&quot;Comment garantir qu’un volume soit accessible uniquement par un conteneur spécifique ?&quot;}},{&quot;context&quot;:&quot;`docker volume prune` supprime tous les volumes non utilisés pour libérer de l'espace sur le système hôte.\n&quot;,&quot;id&quot;:&quot;227315f8-7c1c-4be1-a77e-6d1546ee1cc1&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;docker volume prune&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;docker volume rm&quot;,&quot;docker prune volumes&quot;,&quot;docker volume gc&quot;],&quot;prompt&quot;:&quot;Quelle commande permet de supprimer les volumes non utilisés sur un hôte Docker ?&quot;}},{&quot;context&quot;:&quot;Les volumes sont mieux adaptés à la production grâce à leur sécurité et leur gestion simplifiée.&quot;,&quot;id&quot;:&quot;6a35ce5e-8eb5-4b19-a134-7c73eb53cdfa&quot;,&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;volumes&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;Quelle méthode est préférée pour stocker les données d'application en production : volumes ou bind mounts ?&quot;}},{&quot;context&quot;:&quot;`docker system prune` supprime les volumes anonymes non utilisés mais laisse intacts les volumes nommés.\n&quot;,&quot;id&quot;:&quot;9cdfcc46-6ea3-4ed9-b328-ac283ad583c9&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;Les volumes anonymes non utilisés sont supprimés uniquement.&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;Les volumes sont sauvegardés.&quot;,&quot;Les volumes utilisés par des conteneurs sont supprimés.&quot;,&quot;Les volumes anonymes non utilisés sont supprimés uniquement.&quot;],&quot;prompt&quot;:&quot;Quel est l'effet de la commande `docker system prune` sur les volumes ?&quot;}}]}" data-quiz-fullscreen="true"></div>
<script type="text/javascript" src="../../quiz/quiz-embed.iife.js"></script><link rel="stylesheet" type="text/css" href="../../quiz/style.css">
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../course/part1/images_and_containers.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../course/part1/wrap_up.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../course/part1/images_and_containers.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../course/part1/wrap_up.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
